{
  "year": "2012",
  "stats": {
    "total_commits": 29,
    "with_description": 29,
    "without_description": 0,
    "total_insertions": 2201,
    "total_deletions": 88,
    "contributors": 13
  },
  "commits": [
    {
      "hash": "7a1da692083c1d9d2e604df89ed553fd2ede9907",
      "short_hash": "7a1da692083c",
      "author_name": "Mauro Dreissig",
      "author_email": "mukadr@gmail.com",
      "date": "2012-10-11 19:45:21 -0700",
      "year": "2012",
      "subject": "Fix wrong array size expression",
      "body": "Signed-off-by: Mauro Dreissig <mukadr@gmail.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "expression.c",
            "insertions": 1,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 1,
        "total_deletions": 1
      }
    },
    {
      "hash": "122820872558c308549a099066e994ec5ca2ce9e",
      "short_hash": "122820872558",
      "author_name": "Christopher Li",
      "author_email": "sparse@chrisli.org",
      "date": "2012-10-11 19:37:23 -0700",
      "year": "2012",
      "subject": "Merge branch 'llvm/core' of github.com:penberg/sparse-llvm",
      "body": "Please pull the latest Sparse/LLVM tree from:\n\n  git@github.com:penberg/sparse-llvm.git llvm/core\n\nIt contains few LLVM backend fixes from myself and Jonathan Neusch\u00e4fer.",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 33,
            "deletions": 5
          },
          {
            "file": "validation/backend/extern.c",
            "insertions": 11,
            "deletions": 0
          },
          {
            "file": "validation/backend/int-cond.c",
            "insertions": 30,
            "deletions": 0
          },
          {
            "file": "validation/backend/load-type.c",
            "insertions": 12,
            "deletions": 0
          },
          {
            "file": "validation/backend/void-return-type.c",
            "insertions": 13,
            "deletions": 0
          }
        ],
        "total_files": 5,
        "total_insertions": 99,
        "total_deletions": 5
      }
    },
    {
      "hash": "d5bd3662e07343fbd82c05606f4c25951062d1bb",
      "short_hash": "d5bd3662e073",
      "author_name": "Jonathan Neusch\u00e4fer",
      "author_email": "j.neuschaefer@gmx.net",
      "date": "2012-10-10 01:34:36 +0200",
      "year": "2012",
      "subject": "sparse, llvm: Fix type of loaded values",
      "body": "Instead of making the computed address a pointer to an int type\nlarge enough to hold a pointer, make it a pointer to the memory\nobject being loaded.  This fixes another LLVM warning.\n\nCc: Pekka Enberg <penberg@kernel.org>\nCc: Christopher Li <sparse@chrisli.org>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nAcked-by: Jeff Garzik <jgarzik@redhat.com>\nSigned-off-by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 1,
            "deletions": 1
          },
          {
            "file": "validation/backend/load-type.c",
            "insertions": 12,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 13,
        "total_deletions": 1
      }
    },
    {
      "hash": "e03a53b13e76c8049406eca28c843da33d3e394d",
      "short_hash": "e03a53b13e76",
      "author_name": "Jonathan Neusch\u00e4fer",
      "author_email": "j.neuschaefer@gmx.net",
      "date": "2012-08-19 16:52:16 +0200",
      "year": "2012",
      "subject": "sparse, llvm: convert the condition of branch/select to bool",
      "body": "LLVM expects the first argument of \"br\" and \"select\" to be of type i1,\nso add an \"icmp ne <srcty> %src, 0\" for other types.\n\nCc: Christopher Li <sparse@chrisli.org>\nCc: Jeff Garzik <jgarzik@redhat.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nSigned-off-by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 11,
            "deletions": 2
          },
          {
            "file": "validation/backend/int-cond.c",
            "insertions": 30,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 41,
        "total_deletions": 2
      }
    },
    {
      "hash": "33844e787a0ed80d04b2917042fec50ccf4c91dd",
      "short_hash": "33844e787a0e",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-08-19 12:25:11 +0300",
      "year": "2012",
      "subject": "sparse, llvm: Fix 'void' return type code generation",
      "body": "Jonathan Neusch\u00e4fer reports:\n\n  A simple function like this will compile to the following llvm\n  bitcode:\n\n        /* C */\n        void func(void) {\n                return;\n        }\n\n        /* LLVM */\n        define i8 @func() {\n        L0:\n          ret void\n        }\n\n  The return type of the function and the type in the return instruction\n  don't match.\n\n  I found this inconsistency by running LLVM's bitcode validation on the\n  bitcode produced by sparse-llvm.\n\nMove 'void *' special-casing from sym_basetype_type() to sym_ptr_type()\nto fix the issue.\n\nReported by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nCc: Christopher Li <sparse@chrisli.org>\nCc: Jeff Garzik <jgarzik@redhat.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 10,
            "deletions": 2
          },
          {
            "file": "validation/backend/void-return-type.c",
            "insertions": 13,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 23,
        "total_deletions": 2
      }
    },
    {
      "hash": "e49d1f0f310b8b6d9ef610e1e7108879bf24cdca",
      "short_hash": "e49d1f0f310b",
      "author_name": "Jonathan Neusch\u00e4fer",
      "author_email": "j.neuschaefer@gmx.net",
      "date": "2012-08-19 02:50:22 +0200",
      "year": "2012",
      "subject": "sparse, llvm: 'Verify' the LLVM module before writing it",
      "body": "In later versions sparse-llvm should stop on wrong llvm code, instead\nof outputting it, but for now there are too many warnings being produced\nfor this to be feasible (I think).\n\nCc: Pekka Enberg <penberg@kernel.org>\nSigned-off-by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 3,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 3,
        "total_deletions": 0
      }
    },
    {
      "hash": "14d9355b4a2c6b25f4381ad6ac8b51715382703c",
      "short_hash": "14d9355b4a2c",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-08-05 22:42:46 +0300",
      "year": "2012",
      "subject": "sparse, llvm: Fix SIGSEGV for extern symbols",
      "body": "Jonathan Neusch\u00e4fer writes:\n\n  compiling a little real-world program with sparse-llvm, it segfaulted.\n  Using a tool called \"delta\"[1] and some bash scripting, I managed to\n  reduce the code to this test case:\n\n    extern struct foo *foop;\n    extern void func(struct foo *f);\n    int main(int argc, char **argv) {\n        func(foop);\n    }\n\nThe problem is that pseudo_to_value() does not know abou the extern\nsymbol because Sparse never calls output_data() on it which registers\nglobals with LLVMAddGlobal().\n\nAs explained by Linus, 'extern' symbols are just names with types. They\ndon't have any value associated with them, they just have the type and\nthe name. Therefore we need to explicitly call LLVMAddGlobal() for\nsymbols we have not encountered in pseudo_to_value().\n\nReported by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nCc: Christopher Li <sparse@chrisli.org>\nCc: Jeff Garzik <jgarzik@redhat.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 8,
            "deletions": 0
          },
          {
            "file": "validation/backend/extern.c",
            "insertions": 11,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 19,
        "total_deletions": 0
      }
    },
    {
      "hash": "0a04210cc856267d8371592dc55f8b8bb7596ecc",
      "short_hash": "0a04210cc856",
      "author_name": "KOSAKI Motohiro",
      "author_email": "kosaki.motohiro@gmail.com",
      "date": "2012-06-25 02:47:20 -0700",
      "year": "2012",
      "subject": "sparse: Add 'error' to ignored attributes",
      "body": "Add some more ignored attributes which are used in glibc header files.  It\nsilences the warnings such as the following:\n\n/usr/include/bits/fcntl2.h:36:1: error: attribute '__error__': unknown attribute\n\nSigned-off-by: KOSAKI Motohiro <kosaki.motohiro@gmail.com>\nSigned-off-by: Dan Carpenter <dan.carpenter@oracle.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "ident-list.h",
            "insertions": 1,
            "deletions": 0
          },
          {
            "file": "parse.c",
            "insertions": 2,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 3,
        "total_deletions": 0
      }
    },
    {
      "hash": "2313167a83c397e8acc14d10706a7235f60fc497",
      "short_hash": "2313167a83c3",
      "author_name": "KOSAKI Motohiro",
      "author_email": "kosaki.motohiro@gmail.com",
      "date": "2012-06-25 02:42:58 -0700",
      "year": "2012",
      "subject": "sparse: Add '__vector_size__' to ignored attributes",
      "body": "We already had \"vector_size\" but we also need __vector_size__ to silence\nsome warnings in glibc:\n\n/usr/include/bits/link.h:67:45: error: attribute '__vector_size__': unknown attribute\n\nSigned-off-by: KOSAKI Motohiro <kosaki.motohiro@gmail.com>\nSigned-off-by: Dan Carpenter <dan.carpenter@oracle.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "ident-list.h",
            "insertions": 1,
            "deletions": 0
          },
          {
            "file": "parse.c",
            "insertions": 1,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 2,
        "total_deletions": 0
      }
    },
    {
      "hash": "70c5b9619f9f3d4a33af043d019a073a4dc6e470",
      "short_hash": "70c5b9619f9f",
      "author_name": "Christopher Li",
      "author_email": "sparse@chrisli.org",
      "date": "2012-06-21 02:46:53 -0700",
      "year": "2012",
      "subject": "Merge branch 'for-chris' of git://github.com/penberg/sparse-llvm",
      "body": "Pull 'for-chris' tree from Pekka Enberg:\n\n\"Please pull the latest sparse-llvm tree from:\n git@github.com:penberg/sparse-llvm.git for-chris\n\n It has one new validation test case and fixes to handle strings properly\n in the LLVM backend.\"\n\nPekka Enberg (4):\n      sparse, llvm: Add _Bool to cast validation test\n      sparse, llvm: Simplify output_data() type logic\n      sparse, llvm: Fix string initializer code generation\n      sparse, llvm: Fix global string access code generation",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 14,
            "deletions": 2
          },
          {
            "file": "validation/backend/cast.c",
            "insertions": 3,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 17,
        "total_deletions": 2
      }
    },
    {
      "hash": "063236fd3f46bc83b49172f5ecb597e0a91cede8",
      "short_hash": "063236fd3f46",
      "author_name": "Jonathan Neusch\u00e4fer",
      "author_email": "j.neuschaefer@gmx.net",
      "date": "2012-06-18 23:39:21 +0200",
      "year": "2012",
      "subject": "ptrlist.c: fix a typo in a comment",
      "body": "Signed-off-by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "ptrlist.c",
            "insertions": 1,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 1,
        "total_deletions": 1
      }
    },
    {
      "hash": "aba673f49e8b2b5d6a291c892efe581ae71fca6c",
      "short_hash": "aba673f49e8b",
      "author_name": "Jonathan Neusch\u00e4fer",
      "author_email": "j.neuschaefer@gmx.net",
      "date": "2012-06-18 23:39:20 +0200",
      "year": "2012",
      "subject": "FAQ: update the website address and call it Wiki",
      "body": "Signed-off-by: Jonathan Neusch\u00e4fer <j.neuschaefer@gmx.net>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "FAQ",
            "insertions": 1,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 1,
        "total_deletions": 1
      }
    },
    {
      "hash": "afa3245c069c532f3a88bf0053113c54480a1c1d",
      "short_hash": "afa3245c069c",
      "author_name": "Xi Wang",
      "author_email": "xi.wang@gmail.com",
      "date": "2012-06-17 14:45:05 -0400",
      "year": "2012",
      "subject": "fix casting constant to _Bool",
      "body": "Casting to _Bool requires a zero test rather than truncation.  Also add\na new cast warning for _Bool since this is not about truncation.\n\nCc: Pekka Enberg <penberg@kernel.org>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Dan Carpenter <dan.carpenter@oracle.com>\nSigned-off-by: Xi Wang <xi.wang@gmail.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "expand.c",
            "insertions": 8,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 8,
        "total_deletions": 0
      }
    },
    {
      "hash": "ccf42dc22ef4354ef6db1673a5e2b2bc0a6be273",
      "short_hash": "ccf42dc22ef4",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-06-08 15:47:33 +0300",
      "year": "2012",
      "subject": "sparse, llvm: Fix global string access code generation",
      "body": "This patch attempts to fix code generation for global string access:\n\n  static char *foo = \"Foo !\\n\";\n\n  extern int puts(const char *s);\n\n  int main(int argc, char *argv[])\n  {\n          puts(foo);\n\n          return 0;\n  }\n\nThe generated executable causes a SIGSEGV:\n\n  [penberg@tux sparse]$ ./sparsec foo.c && ./a.out\n  Segmentation fault\n\nBut as pointed out by Xi Wang, the problem is in \"output_load()\":\n\n  I guess the problem is that sparse-llvm generates an incorrect type `load i64*'\n  in llvm from the sparse instruction load.64.\n\n         load.64     %r2 <- 0[foo]\n         call.32     %r1 <- puts, %r2\n         ret.32      $0\n\n  With the new ->ctype in pseudo sparse-llvm should be able to generate the\n  correct type.  I am playing with an LLVM backend with typed pseudos; it\n  generates the following code, which seems okay.\n\n  @0 = internal global [7 x i8] c\"Foo !\\0A\\00\", align 1\n  @foo = internal global i8* getelementptr inbounds ([7 x i8]* @0, i64 0, i64 0), align 8\n\n  define i32 @main(i32 %argc, i8** %argv) {\n  entry:\n   %0 = load i8** @foo\n   %1 = call i32 @puts(i8* %0)\n   ret i32 0\n  }\n\nSo I'll leave the output_load() fix to a separate patch for now.\n\nCc: Xi Wang <xi.wang@gmail.com>\nCc: Benjamin Herrenschmidt <benh@kernel.crashing.org>\nCc: Christopher Li <sparse@chrisli.org>\nAcked-by: Jeff Garzik <jgarzik@redhat.com>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 7,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 7,
        "total_deletions": 1
      }
    },
    {
      "hash": "ee2ca87d9bd18850518c8bca95d61df6010d9351",
      "short_hash": "ee2ca87d9bd1",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-06-08 15:24:12 +0300",
      "year": "2012",
      "subject": "sparse, llvm: Simplify output_data() type logic",
      "body": "Use LLVMTypeOf() in output_data() to simplify type handling logic.\n\nCc: Benjamin Herrenschmidt <benh@kernel.crashing.org>\nCc: Christopher Li <sparse@chrisli.org>\nAcked-by: Jeff Garzik <jgarzik@redhat.com>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 1,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 1,
        "total_deletions": 1
      }
    },
    {
      "hash": "9084e55561e9aa11d291c1a9acaf1a7584651b73",
      "short_hash": "9084e55561e9",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-06-08 14:58:02 +0300",
      "year": "2012",
      "subject": "sparse, llvm: Fix string initializer code generation",
      "body": "This fixes code generation for string initializer such as:\n\n  static char *foo = \"Foo !\\n\";\n\nIt's the same fix Ben proposed earlier with the small difference that we now\nuse LLVMTypeOf() instead of symbol_type() to resolve the type.\n\nThe generated LLVM IR looks as follows:\n\n  [penberg@tux sparse]$ ./sparse-llvm foo.c |llvm-dis\n  ; ModuleID = '<stdin>'\n\n  @\"<noident>\" = private global [7 x i8] c\"Foo !\\0A\\00\"\n  @foo = private global [7 x i8]* @\"<noident>\"\n\nReported-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>\nCc: Christopher Li <sparse@chrisli.org>\nAcked-by: Jeff Garzik <jgarzik@redhat.com>\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 6,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 6,
        "total_deletions": 0
      }
    },
    {
      "hash": "64a6b4c61faa23c40a402656d044141a669965a3",
      "short_hash": "64a6b4c61faa",
      "author_name": "Xi Wang",
      "author_email": "xi.wang@gmail.com",
      "date": "2012-06-03 16:01:46 -0400",
      "year": "2012",
      "subject": "check missing or duplicate goto labels",
      "body": "This patch sets ->stmt of a SYM_LABEL to the corresponding label\nstatement.  If ->stmt was already set, it is a duplicate label.\n\nOn the other hand, if ->stmt of a goto label is not set during\nevaluation, the label was never declared.\n\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "evaluate.c",
            "insertions": 11,
            "deletions": 1
          },
          {
            "file": "parse.c",
            "insertions": 5,
            "deletions": 1
          },
          {
            "file": "validation/goto-label.c",
            "insertions": 29,
            "deletions": 0
          }
        ],
        "total_files": 3,
        "total_insertions": 45,
        "total_deletions": 2
      }
    },
    {
      "hash": "4c982e9d3c6827afb529c7c7ce7fbe987eac24c6",
      "short_hash": "4c982e9d3c68",
      "author_name": "Xi Wang",
      "author_email": "xi.wang@gmail.com",
      "date": "2012-06-01 12:22:00 -0400",
      "year": "2012",
      "subject": "compile-i386: fix use-after-free in func_cleanup()",
      "body": "compile-i386 sometimes crashes due a use-after-free error.  Since\nf->pseudo_list is freed first, which invalidates some atom->op* in\nf->atom_list.  Further checks like `atom->op1->flags & STOR_WANTS_FREE'\nwill read garbage, which may lead to a double free.\n\nThis patch switches the cleanup order and frees f->atom_list first.\nThose marked as STOR_WANTS_FREE won't appear in f->pseudo_list.\n\nSigned-off-by: Xi Wang <xi.wang@gmail.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>\nReviewed-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "compile-i386.c",
            "insertions": 4,
            "deletions": 4
          }
        ],
        "total_files": 1,
        "total_insertions": 4,
        "total_deletions": 4
      }
    },
    {
      "hash": "970d7169d75068146152ba01a66381c800dbeb71",
      "short_hash": "970d7169d750",
      "author_name": "Shakthi Kannan",
      "author_email": "shakthimaan@gmail.com",
      "date": "2012-05-19 23:41:55 -0700",
      "year": "2012",
      "subject": "I have updated the sparse.1 man page including the __bitwise relevant content, and created Documentation/sparse.txt with the complete comparison between __nocast vs __bitwise.",
      "body": "Signed-off-by: Shakthi Kannan <shakthimaan@gmail.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "Documentation/sparse.txt",
            "insertions": 45,
            "deletions": 0
          },
          {
            "file": "sparse.1",
            "insertions": 13,
            "deletions": 1
          }
        ],
        "total_files": 2,
        "total_insertions": 58,
        "total_deletions": 1
      }
    },
    {
      "hash": "955cd225d2e3ee708e20de825eca82c8797897fd",
      "short_hash": "955cd225d2e3",
      "author_name": "Jan Pokorn\u00fd",
      "author_email": "pokorny_jan@seznam.cz",
      "date": "2012-05-10 03:07:47 -0700",
      "year": "2012",
      "subject": "simplify: conservative handling of casts with pointers",
      "body": "On 05/08/2012 04:13 PM, Jan Pokorn\u00fd wrote:\n> When the cast is optimized out/target pointer type information lost,\n> it may be impossible for backend to recover it (think of\n> \"struct foo *my_new_foo = malloc(sizeof(*my_new_foo))\").\n>\n> Losing such pointer type information can be wider issue (structs and\n> unions maybe), but this is the most exposed one and the patch tries\n> to be minimal in this regard and the impact seems to be minimal\n> too as usually type-correctness is followed.\n\nI expected that if both operands of the cast appear to be pointers, it is\nalways OP_PTRCAST case, which is not true.\n\nSo this version exchanges inequality test for \"or\".  Beside being\nshorter, it covers such previously missed cases.\n\nBased on asserts I experimented with, OP_PTRCASTs are always captured\nby the condition implicitly (beside OP_CASTs with pointer-like operands).\n\nSigned-off-by: Jan Pokorn\u00fd <pokorny_jan@seznam.cz>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "simplify.c",
            "insertions": 6,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 6,
        "total_deletions": 0
      }
    },
    {
      "hash": "695dd9d068dd2316b92706d174df9e30c1e71dcf",
      "short_hash": "695dd9d068dd",
      "author_name": "Jan Pokorn\u00fd",
      "author_email": "pokorny_jan@seznam.cz",
      "date": "2012-05-03 13:26:49 -0700",
      "year": "2012",
      "subject": "unssa: track use of newly added pseudo",
      "body": "Currently, it is a completely \"isolated island\" from backend\npoint of view as it also lacks pseudo->def information.\n\nSigned-off-by: Jan Pokorn\u00fd <pokorny_jan@seznam.cz>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "unssa.c",
            "insertions": 1,
            "deletions": 1
          }
        ],
        "total_files": 1,
        "total_insertions": 1,
        "total_deletions": 1
      }
    },
    {
      "hash": "c8b02fc63037f6e6e0147fc65a67a7809ca5744e",
      "short_hash": "c8b02fc63037",
      "author_name": "Al Viro",
      "author_email": "viro@zeniv.linux.org.uk",
      "date": "2012-04-13 20:59:28 -0400",
      "year": "2012",
      "subject": "fix handling of -include",
      "body": "-include foo.h will search not only in the current directory...\n\nSigned-off-by: Al Viro <viro@zeniv.linux.org.uk>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "lib.c",
            "insertions": 6,
            "deletions": 19
          },
          {
            "file": "lib.h",
            "insertions": 0,
            "deletions": 9
          },
          {
            "file": "pre-process.c",
            "insertions": 40,
            "deletions": 30
          }
        ],
        "total_files": 3,
        "total_insertions": 46,
        "total_deletions": 58
      }
    },
    {
      "hash": "8ab3b11aa5cf9f68e374fc297d4f285a65e706a1",
      "short_hash": "8ab3b11aa5cf",
      "author_name": "Frederic Crozat",
      "author_email": "fcrozat@suse.com",
      "date": "2012-03-23 10:31:01 +0100",
      "year": "2012",
      "subject": "Add __builtin_stpcpy, __sync_synchronize, __sync_bool_compare_and_swap to declare_builtin_functions",
      "body": "Signed-off-by: Frederic Crozat <fcrozat@suse.com>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "lib.c",
            "insertions": 3,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 3,
        "total_deletions": 0
      }
    },
    {
      "hash": "7aa79f8401f08ff9dd56088e8cbc394e646e3389",
      "short_hash": "7aa79f8401f0",
      "author_name": "Christopher Li",
      "author_email": "sparse@chrisli.org",
      "date": "2012-03-23 02:58:20 -0700",
      "year": "2012",
      "subject": "Adding default for m64/m32 handle",
      "body": "This is improved version of Pekka Enberg's patch\n\"Fix including glibc headers on x86-64\".\n\nTo avoid setting 64 bit define in the -m32 case,\nthe 64 bit initialization needs to delay until all\narguments are handled.\n\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "lib.c",
            "insertions": 41,
            "deletions": 2
          }
        ],
        "total_files": 1,
        "total_insertions": 41,
        "total_deletions": 2
      }
    },
    {
      "hash": "9c2ffd7b21e8e880243eaec40e9dbc66651b085c",
      "short_hash": "9c2ffd7b21e8",
      "author_name": "Benjamin Herrenschmidt",
      "author_email": "benh@kernel.crashing.org",
      "date": "2012-01-30 20:17:58 +1100",
      "year": "2012",
      "subject": "sparse, llvm: Fix varargs functions",
      "body": "We need to tell llvm about it or it won't generate the proper\nstack frame & argument list on some architectures.\n\nCc: Christopher Li <sparse@chrisli.org>\nCc: Jeff Garzik <jgarzik@redhat.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nSigned-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>\n[ penberg@kernel.org: Fix function pointer calls\u00a0]\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "sparse-llvm.c",
            "insertions": 2,
            "deletions": 2
          }
        ],
        "total_files": 1,
        "total_insertions": 2,
        "total_deletions": 2
      }
    },
    {
      "hash": "ff527e2c72f71ac377d7d40713ac43712426fa13",
      "short_hash": "ff527e2c72f7",
      "author_name": "Linus Torvalds",
      "author_email": "torvalds@linux-foundation.org",
      "date": "2012-01-30 19:02:05 +0200",
      "year": "2012",
      "subject": "sparse, llvm: Make function declaration accessible to backend",
      "body": "On Tue, Aug 30, 2011 at 10:43 AM, Jeff Garzik <jeff@garzik.org> wrote:\n> * if someone knows how to access a function declaration, I can solve the\n> varargs problem\n\nHmm. Right now we do not have access to the function declaration at\nlinearize time. We've checked that the arguments match, and we've cast\nthe arguments to the right types (evaluate.c), so the thinking was\nthat you just use the arguments as-is.\n\nBut if llvm needs the declaration of a function, we'd need to squirrel it away.\n\nCc: Benjamin Herrenschmidt <benh@kernel.crashing.org>\nCc: Christopher Li <sparse@chrisli.org>\nCc: Jeff Garzik <jgarzik@redhat.com>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>\n[ penberg@kernel.org: Fix validation/context.c breakage. ]\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "linearize.c",
            "insertions": 8,
            "deletions": 0
          },
          {
            "file": "linearize.h",
            "insertions": 1,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 9,
        "total_deletions": 0
      }
    },
    {
      "hash": "b0b4886be5f668959b8c75c9c811059e07b1073a",
      "short_hash": "b0b4886be5f6",
      "author_name": "Ethan Jackson",
      "author_email": "ethan@nicira.com",
      "date": "2012-01-17 14:47:11 -0800",
      "year": "2012",
      "subject": "sparse: Add 'leaf' to ignored attributes.",
      "body": "This patch adds the 'leaf' GCC attribute to the list of ignored\nattributes.  Glibc uses this attribute causing the following\nwarnings in userspace projects:\n\n  /usr/include/stdlib.h:514:26: error: attribute '__leaf__': unknown attribute\n\nSigned-off-by: Ethan Jackson <ethan@nicira.com>\nAcked-by: Pekka Enberg <penberg@kernel.org>\nSigned-off-by: Christopher Li <sparse@chrisli.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "ident-list.h",
            "insertions": 2,
            "deletions": 0
          },
          {
            "file": "parse.c",
            "insertions": 2,
            "deletions": 0
          }
        ],
        "total_files": 2,
        "total_insertions": 4,
        "total_deletions": 0
      }
    },
    {
      "hash": "0bf990ff7f1f9457bcda08049d012d23b0d60dfb",
      "short_hash": "0bf990ff7f1f",
      "author_name": "Pekka Enberg",
      "author_email": "penberg@kernel.org",
      "date": "2012-01-03 15:32:08 +0200",
      "year": "2012",
      "subject": "sparse, llvm: Add _Bool to cast validation test",
      "body": "This patch adds casting backend validation test cases for the _Bool data type.\n\nSigned-off-by: Pekka Enberg <penberg@kernel.org>",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": "validation/backend/cast.c",
            "insertions": 3,
            "deletions": 0
          }
        ],
        "total_files": 1,
        "total_insertions": 3,
        "total_deletions": 0
      }
    },
    {
      "hash": "e68f464686c2fcec987d76ecc3da061db7f784e9",
      "short_hash": "e68f464686c2",
      "author_name": "Christopher Li",
      "author_email": "sparse@chrisli.org",
      "date": "2012-01-02 13:47:21 -0800",
      "year": "2012",
      "subject": "Merge branch 'sparse-llvm' of git://github.com/penberg/sparse-llvm.git",
      "body": "'master' branch of git://github.com/penberg/sparse-llvm.git\n\n\tRevert \"sparse: Bump up sizeof(_Bool) to 8 bits\"\n\tsparse, llvm: Add test case for <stdbool.h> type\n\tsparse, llvm: Use LLVMInt1Type() in sym_basetype_type()\n\tsparse, llvm: Don't fail the build if LLVM is too old\n\tMerge pull request #6 from jgarzik/hacks\n\tsparse, llvm: add loop testcase\n\tsparse, llvm: Fix loops, by properly handling OP_PHI forward references\n\tsparse, llvm: FP comparison op code generation\n\tsparse, llvm: Simplify comparison op code generation\n\tsparse, llvm: More comparison ops code generation\n\tsparse, llvm: OP_SET_B and OP_SET_A code generation\n\tsparse, llvm: Pointer cast code generation\n\tsparse, llvm: Make llc output to stdout in sparsec\n\tsparse, llvm: Fix 'extern' symbol code generation\n\tsparse, llvm: Fix symbol initializer code generation\n\tsparse, llvm: Function pointer code generation\n\tsparse, llvm: Make 'sparsec' error handling more robust\n\tsparse, llvm: Add support for union types\n\tsparse, llvm: Add support for array types\n\tsparse, llvm: Fix symbol_type() for bitfields and enums\n\tsparse, llvm: Fix struct code generation\n\tsparse, llvm: Use new LLVM type system API for structs\n\tsparse, llvm: Fix 'void *' pointer code generation\n\tsparse, llvm: Add support for logical ops\n\tsparse: Bump up sizeof(_Bool) to 8 bits\n\tsparse, llvm: Add support for symbol initializers\n\tsparse, llvm: Add support for struct types\n\tsparse, llvm: Fix code generation for 'long double' data type\n\tMerge pull request #4 from jgarzik/hacks\n\tsparse, llvm: support OP_STORE\n\tsparse, llvm: move OP_COPY support to separate function.  Add FP support.\n\tsparse, llvm: store module-local functions on function reference list\n\tllvm, sparse: Fix symbol_is_fp_type() goof\n\tMerge branch 'master' of github.com:penberg/sparse-llvm\n\tMerge pull request #3 from jgarzik/hacks\n\tsparse, llvm: Fix pseudo_type() for PSEUDO_ARG\n\tsparse, llvm: create helper for obtaining instruction's type\n\tsparse, llvm: Fix code generation for casts\n\tRevert \"sparse, llvm: Don't redefine module local functions\"\n\tsparse, llvm: Don't redefine module local functions\n\tsparse, llvm: Fix PSEUDO_OP code generation\n\tsparse, llvm: Improve sparsec front-end\n\tsparse, llvm: Fix OP_CAST to use zero-extend\n\tsparse, llvm: Cleanup output_data()\n\tsparse, llvm: Code generation for string constants\n\tsparse, llvm: Warn the user when we fall back to GCC\n\tLimit usage of g++ to llvm related programs.\n\tMerge pull request #2 from jgarzik/hacks\n\tsparse, llvm: move OP_CAST code to separate func.  support FP casts.\n\tcse: update PHI users when throwing away an instruction\n\tcse: treat PHI-nodes as other instructions\n\tMerge pull request #1 from jgarzik/hacks\n\tsparse, llvm: move OP_PHI code from switch statement to separate function\n\tsparse, llvm: implement OP_CALL\n\tsparse, llvm: replace FIXME comment with assert(), following existing style\n\tsparse-llvm OP_PHISOURCE: replace copy with target=src pointer operation\n\tsparse, llvm: Kill debugging code\n\tsparse, llvm: Kill ifdef'd unssa() call\n\tsparse, llvm: Bitwise not operator codegen\n\tsparse, llvm: Reorganize code generation tests\n\tsparse, llvm: Floating point support for binops\n\tsparse-llvm: OP_LOAD\n\tsparse-llvm: OP_SWITCH\n\tsparse-llvm: OP_SEL\n\tsparse, llvm: if-else code generation\n\tsparse, llvm: Implement OP_CAST\n\tsparse, llvm: Move binop tests to validation/backend\n\tsparse, llvm: Implement some binary comparison ops\n\tsparse, llvm: Add support for more binary ops\n\tsparse, llvm: Implement OP_ADD\n\tsparse, llvm: Add output_op_binary() stub\n\tsparse, llvm: Introduce 'struct function' to clean up code\n\tsparse, llvm: Add support for OP_RET/PSEUDO_ARG\n\tsparse, llvm: OP_RET/PSEUDO_VAL code generation\n\tsparse, llvm: Add switch statement to output_insn()\n\tllvm, sparse: Separate entry and exit basic blocks\n\tsparse, llvm: Fix 'sparsec' when it's not in PATH\n\tsparse, llvm: Fix global variable initialization\n\tsparse, llvm: Fix assert() in sparse code\n\tsparse, llvm: Initial commit",
      "has_detailed_description": true,
      "stats": {
        "files_changed": [
          {
            "file": ".gitignore",
            "insertions": 1,
            "deletions": 0
          },
          {
            "file": "Makefile",
            "insertions": 25,
            "deletions": 1
          },
          {
            "file": "linearize.h",
            "insertions": 2,
            "deletions": 0
          },
          {
            "file": "sparse-llvm.c",
            "insertions": 1241,
            "deletions": 0
          },
          {
            "file": "sparsec",
            "insertions": 52,
            "deletions": 0
          },
          {
            "file": "validation/backend/arithmetic-ops.c",
            "insertions": 94,
            "deletions": 0
          },
          {
            "file": "validation/backend/array.c",
            "insertions": 6,
            "deletions": 0
          },
          {
            "file": "validation/backend/bitwise-ops.c",
            "insertions": 64,
            "deletions": 0
          },
          {
            "file": "validation/backend/bool-test.c",
            "insertions": 9,
            "deletions": 0
          },
          {
            "file": "validation/backend/cast.c",
            "insertions": 47,
            "deletions": 0
          },
          {
            "file": "validation/backend/cmp-ops.c",
            "insertions": 84,
            "deletions": 0
          },
          {
            "file": "validation/backend/function-ptr.c",
            "insertions": 11,
            "deletions": 0
          },
          {
            "file": "validation/backend/hello.c",
            "insertions": 13,
            "deletions": 0
          },
          {
            "file": "validation/backend/logical-ops.c",
            "insertions": 24,
            "deletions": 0
          },
          {
            "file": "validation/backend/loop.c",
            "insertions": 21,
            "deletions": 0
          },
          {
            "file": "validation/backend/ptrcast.c",
            "insertions": 9,
            "deletions": 0
          },
          {
            "file": "validation/backend/struct.c",
            "insertions": 19,
            "deletions": 0
          },
          {
            "file": "validation/backend/union.c",
            "insertions": 12,
            "deletions": 0
          }
        ],
        "total_files": 18,
        "total_insertions": 1734,
        "total_deletions": 1
      }
    }
  ]
}